{"ast":null,"code":"/**\n * \n * Query representation wrapper\n */\nimport { objectToUniqueId } from '../../utils';\n// todo doc methods\n\n/**\n * @class Query\n */\nexport default class Query {\n  constructor(ref, existingModifiers) {\n    this.modifiers = existingModifiers ? [...existingModifiers] : [];\n    this._reference = ref;\n  }\n  /**\n   *\n   * @param name\n   * @param key\n   * @return {Reference|*}\n   */\n\n  orderBy(name, key) {\n    this.modifiers.push({\n      id: `orderBy-${name}:${key || ''}`,\n      type: 'orderBy',\n      name,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param limit\n   * @return {Reference|*}\n   */\n\n  limit(name, limit) {\n    this.modifiers.push({\n      id: `limit-${name}:${limit}`,\n      type: 'limit',\n      name,\n      limit\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param value\n   * @param key\n   * @return {Reference|*}\n   */\n\n  filter(name, value, key) {\n    this.modifiers.push({\n      id: `filter-${name}:${objectToUniqueId(value)}:${key || ''}`,\n      type: 'filter',\n      name,\n      value,\n      valueType: typeof value,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @return {[*]}\n   */\n\n  getModifiers() {\n    return [...this.modifiers];\n  }\n  /**\n   *\n   * @return {*}\n   */\n\n  queryIdentifier() {\n    // sort modifiers to enforce ordering\n    const sortedModifiers = this.getModifiers().sort((a, b) => {\n      if (a.id < b.id) return -1;\n      if (a.id > b.id) return 1;\n      return 0;\n    }); // Convert modifiers to unique key\n\n    let key = '{';\n    for (let i = 0; i < sortedModifiers.length; i++) {\n      if (i !== 0) key += ',';\n      key += sortedModifiers[i].id;\n    }\n    key += '}';\n    return key;\n  }\n}","map":{"version":3,"names":["objectToUniqueId","Query","constructor","ref","existingModifiers","modifiers","_reference","orderBy","name","key","push","id","type","limit","filter","value","valueType","getModifiers","queryIdentifier","sortedModifiers","sort","a","b","i","length"],"sources":["/Users/sharusan/MeetMyCar/myapp/node_modules/react-native-firebase/dist/modules/database/Query.js"],"sourcesContent":["/**\n * \n * Query representation wrapper\n */\nimport { objectToUniqueId } from '../../utils';\n// todo doc methods\n\n/**\n * @class Query\n */\nexport default class Query {\n  constructor(ref, existingModifiers) {\n    this.modifiers = existingModifiers ? [...existingModifiers] : [];\n    this._reference = ref;\n  }\n  /**\n   *\n   * @param name\n   * @param key\n   * @return {Reference|*}\n   */\n\n\n  orderBy(name, key) {\n    this.modifiers.push({\n      id: `orderBy-${name}:${key || ''}`,\n      type: 'orderBy',\n      name,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param limit\n   * @return {Reference|*}\n   */\n\n\n  limit(name, limit) {\n    this.modifiers.push({\n      id: `limit-${name}:${limit}`,\n      type: 'limit',\n      name,\n      limit\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @param name\n   * @param value\n   * @param key\n   * @return {Reference|*}\n   */\n\n\n  filter(name, value, key) {\n    this.modifiers.push({\n      id: `filter-${name}:${objectToUniqueId(value)}:${key || ''}`,\n      type: 'filter',\n      name,\n      value,\n      valueType: typeof value,\n      key\n    });\n    return this._reference;\n  }\n  /**\n   *\n   * @return {[*]}\n   */\n\n\n  getModifiers() {\n    return [...this.modifiers];\n  }\n  /**\n   *\n   * @return {*}\n   */\n\n\n  queryIdentifier() {\n    // sort modifiers to enforce ordering\n    const sortedModifiers = this.getModifiers().sort((a, b) => {\n      if (a.id < b.id) return -1;\n      if (a.id > b.id) return 1;\n      return 0;\n    }); // Convert modifiers to unique key\n\n    let key = '{';\n\n    for (let i = 0; i < sortedModifiers.length; i++) {\n      if (i !== 0) key += ',';\n      key += sortedModifiers[i].id;\n    }\n\n    key += '}';\n    return key;\n  }\n\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,gBAAgB,QAAQ,aAAa;AAC9C;;AAEA;AACA;AACA;AACA,eAAe,MAAMC,KAAK,CAAC;EACzBC,WAAWA,CAACC,GAAG,EAAEC,iBAAiB,EAAE;IAClC,IAAI,CAACC,SAAS,GAAGD,iBAAiB,GAAG,CAAC,GAAGA,iBAAiB,CAAC,GAAG,EAAE;IAChE,IAAI,CAACE,UAAU,GAAGH,GAAG;EACvB;EACA;AACF;AACA;AACA;AACA;AACA;;EAGEI,OAAOA,CAACC,IAAI,EAAEC,GAAG,EAAE;IACjB,IAAI,CAACJ,SAAS,CAACK,IAAI,CAAC;MAClBC,EAAE,EAAG,WAAUH,IAAK,IAAGC,GAAG,IAAI,EAAG,EAAC;MAClCG,IAAI,EAAE,SAAS;MACfJ,IAAI;MACJC;IACF,CAAC,CAAC;IACF,OAAO,IAAI,CAACH,UAAU;EACxB;EACA;AACF;AACA;AACA;AACA;AACA;;EAGEO,KAAKA,CAACL,IAAI,EAAEK,KAAK,EAAE;IACjB,IAAI,CAACR,SAAS,CAACK,IAAI,CAAC;MAClBC,EAAE,EAAG,SAAQH,IAAK,IAAGK,KAAM,EAAC;MAC5BD,IAAI,EAAE,OAAO;MACbJ,IAAI;MACJK;IACF,CAAC,CAAC;IACF,OAAO,IAAI,CAACP,UAAU;EACxB;EACA;AACF;AACA;AACA;AACA;AACA;AACA;;EAGEQ,MAAMA,CAACN,IAAI,EAAEO,KAAK,EAAEN,GAAG,EAAE;IACvB,IAAI,CAACJ,SAAS,CAACK,IAAI,CAAC;MAClBC,EAAE,EAAG,UAASH,IAAK,IAAGR,gBAAgB,CAACe,KAAK,CAAE,IAAGN,GAAG,IAAI,EAAG,EAAC;MAC5DG,IAAI,EAAE,QAAQ;MACdJ,IAAI;MACJO,KAAK;MACLC,SAAS,EAAE,OAAOD,KAAK;MACvBN;IACF,CAAC,CAAC;IACF,OAAO,IAAI,CAACH,UAAU;EACxB;EACA;AACF;AACA;AACA;;EAGEW,YAAYA,CAAA,EAAG;IACb,OAAO,CAAC,GAAG,IAAI,CAACZ,SAAS,CAAC;EAC5B;EACA;AACF;AACA;AACA;;EAGEa,eAAeA,CAAA,EAAG;IAChB;IACA,MAAMC,eAAe,GAAG,IAAI,CAACF,YAAY,CAAC,CAAC,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACzD,IAAID,CAAC,CAACV,EAAE,GAAGW,CAAC,CAACX,EAAE,EAAE,OAAO,CAAC,CAAC;MAC1B,IAAIU,CAAC,CAACV,EAAE,GAAGW,CAAC,CAACX,EAAE,EAAE,OAAO,CAAC;MACzB,OAAO,CAAC;IACV,CAAC,CAAC,CAAC,CAAC;;IAEJ,IAAIF,GAAG,GAAG,GAAG;IAEb,KAAK,IAAIc,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,eAAe,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;MAC/C,IAAIA,CAAC,KAAK,CAAC,EAAEd,GAAG,IAAI,GAAG;MACvBA,GAAG,IAAIU,eAAe,CAACI,CAAC,CAAC,CAACZ,EAAE;IAC9B;IAEAF,GAAG,IAAI,GAAG;IACV,OAAOA,GAAG;EACZ;AAEF"},"metadata":{},"sourceType":"module","externalDependencies":[]}