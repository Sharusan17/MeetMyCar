{"ast":null,"code":"import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nasync function handleAddPost(e) {\n  e.preventDefault();\n  if (titleRef.current.value.length < 2) {\n    return setError(\"Title Too Short\");\n  }\n  if (titleRef.current.value.length > 20) {\n    return setError(\"Title Too Long\");\n  }\n  if (descRef.current.value.length < 2) {\n    return setError(\"Description Too Short\");\n  }\n  if (imageRef.current.files.length === 0) {\n    return setError(\"Please select an image to upload.\");\n  }\n  const formData = new FormData();\n  formData.append('user', userId);\n  formData.append('title', titleRef.current.value);\n  formData.append('description', descRef.current.value);\n  formData.append('image', imageRef.current.files[0]);\n  formData.append('vehicleId', selectVehicle.vehicleId);\n  formData.append('vrn', selectVehicle.vrn);\n  console.log(selectVehicle);\n  try {\n    setError('');\n    setLoading(true);\n    const response = await fetch('http://localhost:3001/posts/add', {\n      method: 'POST',\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message);\n    }\n    const data = await response.json();\n    console.log(data.newPost._id);\n    const firebaseUID = currentUser.uid;\n    const Post_formData = new FormData();\n    Post_formData.append('postId', data.newPost._id);\n    const userResponse = await fetch(`http://localhost:3001/users/update?userfb=${encodeURIComponent(firebaseUID)}`, {\n      method: 'PUT',\n      body: Post_formData\n    });\n    if (!userResponse.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message);\n    }\n    const userSFResponse = await fetch(`http://localhost:3001/users/update?userfb=${encodeURIComponent(firebaseUID)}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        addSuperFuel: +1\n      })\n    });\n    if (!userSFResponse.ok) {\n      console.error(\"Error Updating User's SuperFuel:\");\n    }\n    console.log(\"Add Post Successful\");\n    navigate(\"/\");\n  } catch (error) {\n    console.error(\"Error Creating Post:\", error);\n    setError(\"Failed To Create Post\");\n  }\n  setLoading(false);\n}\nexport const auth = app.auth();\nexport default app;","map":{"version":3,"names":["firebase","handleAddPost","e","preventDefault","titleRef","current","value","length","setError","descRef","imageRef","files","formData","FormData","append","userId","selectVehicle","vehicleId","vrn","console","log","setLoading","response","fetch","method","body","ok","errorData","json","Error","message","data","newPost","_id","firebaseUID","currentUser","uid","Post_formData","userResponse","encodeURIComponent","userSFResponse","headers","JSON","stringify","addSuperFuel","error","navigate","auth","app"],"sources":["/Users/sharusan/MeetMyCar/myapp/src/firebase.js"],"sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nasync function handleAddPost(e){\n    e.preventDefault()\n\n   if (titleRef.current.value.length < 2 ){\n        return setError(\"Title Too Short\")\n   }\n\n   if (titleRef.current.value.length > 20 ){\n        return setError(\"Title Too Long\")\n   }\n\n   if (descRef.current.value.length < 2 ){\n        return setError(\"Description Too Short\")\n   }\n\n   if (imageRef.current.files.length === 0) {\n        return setError(\"Please select an image to upload.\")\n   }\n\n\n   const formData = new FormData();\n   formData.append('user', userId);\n   formData.append('title', titleRef.current.value);\n   formData.append('description', descRef.current.value);\n   formData.append('image', imageRef.current.files[0]);\n   formData.append('vehicleId', selectVehicle.vehicleId)\n   formData.append('vrn', selectVehicle.vrn)\n\n   console.log(selectVehicle)\n\n    try{\n        setError('')\n        setLoading(true) \n\n\n        const response = await fetch('http://localhost:3001/posts/add', {\n            method: 'POST',\n            body: formData,\n        });\n\n        if (!response.ok){\n            const errorData = await response.json()\n            throw new Error(errorData.message)\n        }\n\n        const data = await response.json()\n\n        console.log(data.newPost._id)\n\n        const firebaseUID = currentUser.uid;\n\n        const Post_formData = new FormData();\n        Post_formData.append('postId', data.newPost._id);\n\n        const userResponse = await fetch(`http://localhost:3001/users/update?userfb=${encodeURIComponent(firebaseUID)}`, {\n            method: 'PUT',\n            body: Post_formData,\n        });\n\n        if (!userResponse.ok){\n            const errorData = await response.json()\n            throw new Error(errorData.message)\n        } \n\n        const userSFResponse = await fetch(`http://localhost:3001/users/update?userfb=${encodeURIComponent(firebaseUID)}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({addSuperFuel: +1})\n        });\n\n        if (!userSFResponse.ok){\n            console.error(\"Error Updating User's SuperFuel:\")\n        }\n\n        console.log(\"Add Post Successful\")\n        navigate(\"/\")\n\n    }catch (error){\n        console.error(\"Error Creating Post:\", error)\n        setError(\"Failed To Create Post\")\n        \n    }\n    setLoading(false) \n}\n\nexport const auth = app.auth()\nexport default app"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,qBAAqB;AAC1C,OAAO,sBAAsB;AAE7B,eAAeC,aAAaA,CAACC,CAAC,EAAC;EAC3BA,CAAC,CAACC,cAAc,CAAC,CAAC;EAEnB,IAAIC,QAAQ,CAACC,OAAO,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;IAClC,OAAOC,QAAQ,CAAC,iBAAiB,CAAC;EACvC;EAEA,IAAIJ,QAAQ,CAACC,OAAO,CAACC,KAAK,CAACC,MAAM,GAAG,EAAE,EAAE;IACnC,OAAOC,QAAQ,CAAC,gBAAgB,CAAC;EACtC;EAEA,IAAIC,OAAO,CAACJ,OAAO,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;IACjC,OAAOC,QAAQ,CAAC,uBAAuB,CAAC;EAC7C;EAEA,IAAIE,QAAQ,CAACL,OAAO,CAACM,KAAK,CAACJ,MAAM,KAAK,CAAC,EAAE;IACpC,OAAOC,QAAQ,CAAC,mCAAmC,CAAC;EACzD;EAGA,MAAMI,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEC,MAAM,CAAC;EAC/BH,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEV,QAAQ,CAACC,OAAO,CAACC,KAAK,CAAC;EAChDM,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEL,OAAO,CAACJ,OAAO,CAACC,KAAK,CAAC;EACrDM,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEJ,QAAQ,CAACL,OAAO,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC;EACnDC,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEE,aAAa,CAACC,SAAS,CAAC;EACrDL,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAEE,aAAa,CAACE,GAAG,CAAC;EAEzCC,OAAO,CAACC,GAAG,CAACJ,aAAa,CAAC;EAEzB,IAAG;IACCR,QAAQ,CAAC,EAAE,CAAC;IACZa,UAAU,CAAC,IAAI,CAAC;IAGhB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;MAC5DC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEb;IACV,CAAC,CAAC;IAEF,IAAI,CAACU,QAAQ,CAACI,EAAE,EAAC;MACb,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAACF,SAAS,CAACG,OAAO,CAAC;IACtC;IAEA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACM,IAAI,CAAC,CAAC;IAElCT,OAAO,CAACC,GAAG,CAACW,IAAI,CAACC,OAAO,CAACC,GAAG,CAAC;IAE7B,MAAMC,WAAW,GAAGC,WAAW,CAACC,GAAG;IAEnC,MAAMC,aAAa,GAAG,IAAIxB,QAAQ,CAAC,CAAC;IACpCwB,aAAa,CAACvB,MAAM,CAAC,QAAQ,EAAEiB,IAAI,CAACC,OAAO,CAACC,GAAG,CAAC;IAEhD,MAAMK,YAAY,GAAG,MAAMf,KAAK,CAAE,6CAA4CgB,kBAAkB,CAACL,WAAW,CAAE,EAAC,EAAE;MAC7GV,MAAM,EAAE,KAAK;MACbC,IAAI,EAAEY;IACV,CAAC,CAAC;IAEF,IAAI,CAACC,YAAY,CAACZ,EAAE,EAAC;MACjB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAACF,SAAS,CAACG,OAAO,CAAC;IACtC;IAEA,MAAMU,cAAc,GAAG,MAAMjB,KAAK,CAAE,6CAA4CgB,kBAAkB,CAACL,WAAW,CAAE,EAAC,EAAE;MAC/GV,MAAM,EAAE,KAAK;MACbiB,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDhB,IAAI,EAAEiB,IAAI,CAACC,SAAS,CAAC;QAACC,YAAY,EAAE,CAAC;MAAC,CAAC;IAC3C,CAAC,CAAC;IAEF,IAAI,CAACJ,cAAc,CAACd,EAAE,EAAC;MACnBP,OAAO,CAAC0B,KAAK,CAAC,kCAAkC,CAAC;IACrD;IAEA1B,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClC0B,QAAQ,CAAC,GAAG,CAAC;EAEjB,CAAC,QAAOD,KAAK,EAAC;IACV1B,OAAO,CAAC0B,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CrC,QAAQ,CAAC,uBAAuB,CAAC;EAErC;EACAa,UAAU,CAAC,KAAK,CAAC;AACrB;AAEA,OAAO,MAAM0B,IAAI,GAAGC,GAAG,CAACD,IAAI,CAAC,CAAC;AAC9B,eAAeC,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}