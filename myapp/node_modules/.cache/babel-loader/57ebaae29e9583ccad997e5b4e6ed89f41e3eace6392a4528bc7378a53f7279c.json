{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sharusan/MeetMyCar/myapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sharusan/MeetMyCar/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sharusan/MeetMyCar/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import{Form,Button}from'react-bootstrap';import{useAuth}from'./AuthContext';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(){var emailRef=useRef();var passwordRef=useRef();var passwordConfirmRef=useRef();var _useAuth=useAuth(),currentUser=_useAuth.currentUser,updateEmail=_useAuth.updateEmail,updatePassword=_useAuth.updatePassword;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var navigate=useNavigate();function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var toupdate;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(passwordRef.current.value!==passwordConfirmRef.current.value)){_context.next=3;break;}return _context.abrupt(\"return\",setError(\"Password do not match\"));case 3:if(!(passwordRef.current.value.length<6&&passwordConfirmRef.current.value.length<6)){_context.next=5;break;}return _context.abrupt(\"return\",setError(\"Password Too Short\"));case 5:toupdate=[];setLoading(true);setError('');if(emailRef.current.value!==currentUser.email){toupdate.push(updateEmail(emailRef.current.value));}if(passwordRef.current.value!==currentUser.password){toupdate.push(updatePassword(passwordRef.current.value));}Promise.all(toupdate).then(function(){navigate('/');}).catch(function(){setError(\"Failed to Update Account\");}).finally(function(){setLoading(false);});case 11:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-4\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,defaultValue:currentUser.email,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passwordRef,placeholder:\"Leave Blank to keep the same\"})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"passwordConfirmation\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password Confirmation\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passwordConfirmRef,placeholder:\"Leave Blank to keep the same\"})]}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(Button,{disabled:loading,className:\"w-100 mt-2\",type:\"submit\",children:\"Update\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-center mt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"  Go Back Home\"})})]});};export default UpdateProfile;","map":{"version":3,"names":["React","useRef","useState","Form","Button","useAuth","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateProfile","emailRef","passwordRef","passwordConfirmRef","_useAuth","currentUser","updateEmail","updatePassword","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","loading","setLoading","navigate","handleSubmit","_x","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","toupdate","wrap","_callee$","_context","prev","next","preventDefault","current","value","abrupt","length","email","push","password","Promise","all","then","catch","finally","stop","children","className","onSubmit","Group","id","Label","Control","type","ref","defaultValue","required","placeholder","disabled","to"],"sources":["/Users/sharusan/MeetMyCar/myapp/src/UpdateProfile.js"],"sourcesContent":["import React, {useRef, useState} from 'react'\nimport {Form, Button} from 'react-bootstrap'\nimport { useAuth } from './AuthContext'\nimport {Link, useNavigate} from 'react-router-dom'\n\nconst UpdateProfile = () => {\n\n    const emailRef = useRef()\n    const passwordRef = useRef()\n    const passwordConfirmRef = useRef()\n    const {currentUser, updateEmail, updatePassword} = useAuth()\n    const [error, setError] = useState('')\n    const [loading, setLoading] = useState(false)\n    const navigate = useNavigate()\n\n\n\n    async function handleSubmit(e){\n        e.preventDefault()\n\n        if (passwordRef.current.value !== passwordConfirmRef.current.value){\n            return setError(\"Password do not match\")\n        }\n        if (passwordRef.current.value.length < 6 && passwordConfirmRef.current.value.length < 6 ){\n            return setError(\"Password Too Short\")\n        }\n\n        const toupdate = []\n        setLoading(true)\n        setError('')\n\n        if (emailRef.current.value !== currentUser.email){\n            toupdate.push(updateEmail(emailRef.current.value))\n        }\n        if (passwordRef.current.value !== currentUser.password){\n            toupdate.push(updatePassword(passwordRef.current.value))\n        }\n\n        Promise.all(toupdate).then(() => {\n            navigate('/')\n        }).catch( () => {\n            setError(\"Failed to Update Account\")\n        }).finally( () => {\n            setLoading(false)\n        })\n    }\n\n\n  return (\n      <>\n            <body>\n                <h1 className=\"text-center mb-4\">Update Profile</h1>\n                <form onSubmit={handleSubmit}>\n                    \n                    <Form.Group id=\"email\">\n                        <Form.Label>Email</Form.Label>\n                        <Form.Control type=\"email\" ref={emailRef}  defaultValue={currentUser.email} required/>\n                    </Form.Group>            \n                    \n                    <Form.Group id=\"password\">\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control type=\"password\" ref={passwordRef} placeholder='Leave Blank to keep the same' />\n                    </Form.Group>\n\n                    <Form.Group id=\"passwordConfirmation\">\n                        <Form.Label>Password Confirmation</Form.Label>\n                        <Form.Control type=\"password\" ref={passwordConfirmRef} placeholder='Leave Blank to keep the same'  />\n                    </Form.Group>\n\n                    <p>{error}</p>\n\n                    <Button disabled={loading} className=\"w-100 mt-2\" type=\"submit\">Update</Button>\n                </form>\n\n            </body>\n\n            \n        <div className=\"w-100 text-center mt-2\">\n            <Link to=\"/\">  Go Back Home</Link>\n        </div>\n      </>\n    \n  )\n}\n\nexport default UpdateProfile\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}